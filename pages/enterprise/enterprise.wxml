<view class="container">
  <view class="header">
    <text class="title">ä¼ä¸šæˆæœ¬è®¡ç®—å™¨</text>
  </view>

  <view class="form">
    <view class="form-item">
      <text class="label">å‘˜å·¥æœˆå·¥èµ„ï¼ˆå…ƒï¼‰</text>
      <input 
        class="input" 
        type="digit" 
        placeholder="è¯·è¾“å…¥æœˆå·¥èµ„"
        value="{{salary}}"
        bindinput="onSalaryInput" />
    </view>

    <view class="form-item">
      <text class="label">å‘˜å·¥æ•°é‡</text>
      <input 
        class="input" 
        type="number" 
        placeholder="è¯·è¾“å…¥å‘˜å·¥æ•°é‡"
        value="{{employeeCount}}"
        bindinput="onEmployeeCountInput" />
    </view>

    <view class="form-item">
      <text class="label">å…¶ä»–æœˆåº¦æˆæœ¬ï¼ˆå…ƒï¼‰</text>
      <input 
        class="input" 
        type="digit" 
        placeholder="åŠå…¬è®¾å¤‡ã€åŸ¹è®­ç­‰ï¼ˆå¯é€‰ï¼‰"
        value="{{otherCosts}}"
        bindinput="onOtherCostsInput" />
    </view>

    <view class="button-group">
      <button class="btn btn-primary" bindtap="calculate">è®¡ç®—</button>
      <button class="btn btn-default" bindtap="reset">é‡ç½®</button>
    </view>
  </view>

  <view class="result" wx:if="{{result}}">
    <view class="result-header">
      <text class="result-title">è®¡ç®—ç»“æœ</text>
    </view>
    
    <view class="period-section">
      <text class="period-title">æœˆåº¦æˆæœ¬</text>
      <view class="cost-items">
        <view class="cost-item">
          <text class="cost-label">å·¥èµ„æ€»é¢</text>
          <text class="cost-value">Â¥{{result.monthly.totalSalary}}</text>
        </view>
        <view class="cost-item">
          <text class="cost-label">äº”é™©ä¸€é‡‘ï¼ˆå•ä½ï¼‰</text>
          <text class="cost-value">Â¥{{result.monthly.totalCompanyInsurance}}</text>
        </view>
        <view class="cost-item">
          <text class="cost-label">å…¶ä»–æˆæœ¬</text>
          <text class="cost-value">Â¥{{result.monthly.otherCosts}}</text>
        </view>
        <view class="cost-item total">
          <text class="cost-label">æœˆåº¦æ€»æˆæœ¬</text>
          <text class="cost-value highlight">Â¥{{result.monthly.grandTotal}}</text>
        </view>
      </view>
    </view>

    <view class="chart-container">
      <text class="chart-title">æœˆåº¦æˆæœ¬å æ¯”åˆ†å¸ƒ</text>
      <canvas canvas-id="monthlyCostCanvas" class="chart-canvas"></canvas>
    </view>

    <view class="period-section">
      <text class="period-title">å¹´åº¦æˆæœ¬</text>
      <view class="cost-items">
        <view class="cost-item">
          <text class="cost-label">å·¥èµ„æ€»é¢</text>
          <text class="cost-value">Â¥{{result.annual.totalSalary}}</text>
        </view>
        <view class="cost-item">
          <text class="cost-label">äº”é™©ä¸€é‡‘ï¼ˆå•ä½ï¼‰</text>
          <text class="cost-value">Â¥{{result.annual.totalCompanyInsurance}}</text>
        </view>
        <view class="cost-item">
          <text class="cost-label">å…¶ä»–æˆæœ¬</text>
          <text class="cost-value">Â¥{{result.annual.otherCosts}}</text>
        </view>
        <view class="cost-item total">
          <text class="cost-label">å¹´åº¦æ€»æˆæœ¬</text>
          <text class="cost-value highlight">Â¥{{result.annual.grandTotal}}</text>
        </view>
      </view>
    </view>

    <view class="chart-container">
      <text class="chart-title">å¹´åº¦æˆæœ¬å æ¯”åˆ†å¸ƒ</text>
      <canvas canvas-id="annualCostCanvas" class="chart-canvas"></canvas>
    </view>

    <view class="info-section">
      <text class="info-text">ğŸ’¡ ä¼ä¸šæˆæœ¬åŒ…æ‹¬å·¥èµ„å’Œå•ä½æ‰¿æ‹…çš„äº”é™©ä¸€é‡‘</text>
      <text class="info-text">å‘˜å·¥æ•°é‡ï¼š{{result.monthly.employeeCount}} äºº</text>
    </view>
  </view>
</view>
